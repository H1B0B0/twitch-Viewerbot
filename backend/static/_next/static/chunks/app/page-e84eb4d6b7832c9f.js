(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{64841:(e,t,a)=>{Promise.resolve().then(a.bind(a,3568))},45689:(e,t,a)=>{"use strict";a.d(t,{Nu:()=>d,iD:()=>l,kz:()=>o,ri:()=>c});var r=a(82651),s=a(18094);let n="https://api.velbots.shop",i=async e=>(await r.A.get(e,{withCredentials:!0})).data;async function o(e){try{return(await r.A.post("".concat(n,"/auth/register"),e,{withCredentials:!0})).data}catch(e){throw console.error("Register error:",e),e}}async function l(e){try{return(await r.A.post("".concat(n,"/auth/login"),e,{withCredentials:!0,headers:{"Content-Type":"application/json"},xsrfCookieName:"csrf_access_token",xsrfHeaderName:"X-CSRF-TOKEN"})).data}catch(e){throw console.error("Login error:",e),e}}async function c(){try{return(await r.A.post("".concat(n,"/auth/logout"),{},{withCredentials:!0})).data}catch(e){throw console.error("Logout error:",e),e}}function d(){return(0,s.Ay)("".concat(n,"/users/profile"),i)}},3568:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var r=a(95155),s=a(12115),n=a(97293),i=a(6323),o=a(51889),l=a(33767),c=a(43794),d=a(38260),u=a(74121),h=a(28555),m=a(13669),x=a(6331);a(85716);var p=a(19199);function v(e){let{title:t,value:a,total:s,increment:i}=e,o=s?a/s*100:0;return(0,r.jsx)(n.Z,{children:(0,r.jsxs)(l.U,{className:"space-y-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium",children:t}),(0,r.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,r.jsxs)("div",{className:"flex items-baseline",children:[(0,r.jsx)("span",{className:"text-2xl font-bold",children:a}),i&&(0,r.jsx)("span",{className:"ml-1 text-sm opacity-70",children:"/s"})]}),s&&(0,r.jsxs)("div",{className:"text-sm opacity-70",children:["of ",s]})]}),s&&(0,r.jsx)(p.o,{value:o})]})})}var g=a(45689),y=a(76046);async function f(e){if(!e)return console.log("No username provided for viewer count fetch"),0;try{var t,a,r;let s=await fetch("https://gql.twitch.tv/gql",{method:"POST",headers:{"Client-Id":"kimne78kx3ncx6brgo4mv6wki5h1ko","Content-Type":"application/json"},body:JSON.stringify({query:"\n        query GetViewerCount($login: String!) {\n          user(login: $login) {\n            stream {\n              viewersCount\n            }\n          }\n        }\n      ",variables:{login:e}})}),n=await s.json();return(null==n?void 0:null===(r=n.data)||void 0===r?void 0:null===(a=r.user)||void 0===a?void 0:null===(t=a.stream)||void 0===t?void 0:t.viewersCount)||0}catch(t){return console.error("\uD83D\uDD34 Error fetching viewer count for ".concat(e,":"),t),0}}var j=a(70119);function w(e){let{trend:t,delay:a=0}=e,[n,i]=(0,s.useState)(Math.random()),o=(0,s.useMemo)(()=>({initialX:80*Math.random()-40,randomX1:40*Math.random()-20,randomX2:80*Math.random()-40,randomRotate:360*Math.random(),randomSize:3*Math.random()+2,randomBorderRadius:10*Math.random()+2}),[]);return(0,r.jsx)(j.P.div,{initial:{y:0,x:o.initialX,opacity:1,scale:1,rotate:0},animate:{y:"up"===t?[0,-40,-120]:[0,40,80],x:"up"===t?[o.initialX,o.initialX+o.randomX1,o.initialX+o.randomX2]:[o.initialX,o.initialX,o.initialX],opacity:[1,.7,0],scale:[1,1.3,0],rotate:[0,o.randomRotate,0]},transition:{duration:2+Math.random(),delay:a,ease:"easeOut"},onAnimationComplete:()=>i(Math.random()),style:{width:o.randomSize,height:o.randomSize,borderRadius:o.randomBorderRadius},className:"absolute ".concat("up"===t?"bg-gradient-to-t from-orange-600 to-yellow-400 shadow-lg shadow-orange-500/50":"bg-gradient-to-b from-blue-500 to-cyan-300")},n)}function N(e){let{value:t,previousValue:a}=e,[i,o]=(0,s.useState)(null);return(0,s.useEffect)(()=>{void 0!==a&&t!==a&&o(t>a?"up":"down")},[t,a]),(0,r.jsx)(n.Z,{children:(0,r.jsxs)(l.U,{className:"space-y-3 relative overflow-hidden",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2",children:["Current Viewers",i&&(0,r.jsx)(j.P.div,{initial:{scale:0},animate:{scale:1},className:"text-xl ".concat("up"===i?"text-orange-500":"text-blue-500"),children:"up"===i?"\uD83D\uDD25":"❄️"})]}),(0,r.jsxs)("div",{className:"flex justify-center items-center relative min-h-[80px]",children:[(0,r.jsx)(j.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1,transition:{type:"spring",stiffness:300,damping:20}},className:"text-4xl font-bold relative z-10 ".concat("up"===i?"text-orange-500 drop-shadow-[0_0_15px_rgba(255,165,0,0.7)]":"down"===i?"text-blue-500 drop-shadow-[0_0_15px_rgba(0,191,255,0.7)]":""),children:0===t?(0,r.jsx)("span",{className:"text-2xl text-default-400",children:"Offline"}):t.toLocaleString()},t),i&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:Array.from({length:20}).map((e,t)=>(0,r.jsx)(w,{trend:i,delay:.1*t},"".concat(i,"-").concat(t)))})]})]})})}var b=a(82651);let T="http://localhost:3001/api";async function C(){try{return!!(await b.A.get("".concat("https://api.velbots.shop","/users/profile"),{withCredentials:!0})).data}catch(e){return console.error("Authentication check failed:",e),!1}}async function _(e){if(!await C())throw Error("Authentication required");try{let t=new FormData;return t.append("channelName",e.channelName),t.append("threads",e.threads.toString()),t.append("timeout",e.timeout.toString()),t.append("proxyType",e.proxyType),e.proxyFile&&t.append("proxyFile",e.proxyFile),(await b.A.post("".concat(T,"/bot/start"),t)).data}catch(e){if(e instanceof Error)throw Error(e.message);throw Error("An unknown error occurred")}}async function S(){if(!await C())throw Error("Authentication required");try{return(await b.A.post("".concat(T,"/bot/stop"))).data}catch(e){throw e}}async function k(){if(!await C())throw Error("Authentication required");try{return(await b.A.get("".concat(T,"/bot/stats"))).data}catch(e){throw e}}function P(){var e,t;let a=(0,y.useRouter)(),{data:p}=(0,g.Nu)(),[j,w]=(0,s.useState)({threads:1,channelName:"",gameName:"",messagesPerMinute:1,enableChat:!1,proxyType:"http",timeout:1e3}),{viewerCount:b,previousCount:T}=function(e){let[t,a]=(0,s.useState)(0),[r,n]=(0,s.useState)(0),[i,o]=(0,s.useState)();return(0,s.useEffect)(()=>{if(!e)return;let r=async()=>{let r=await f(e);n(t),a(r),o(new Date)};r();let s=setInterval(r,2e3);return()=>{clearInterval(s)}},[e,t]),{viewerCount:t,previousCount:r,lastUpdate:i}}((null==j?void 0:j.channelName)||(null==p?void 0:null===(e=p.user)||void 0===e?void 0:e.TwitchUsername)),[C,P]=(0,s.useState)(!1),[A,E]=(0,s.useState)(null),[M,q]=(0,s.useState)({totalProxies:0,aliveProxies:0,activeThreads:0,request_count:0,viewers:b,targetViewers:0}),[R,F]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e;return C&&(e=setInterval(async()=>{try{let e=await k();q(t=>({...t,activeThreads:e.active_threads,totalProxies:e.total_proxies,aliveProxies:e.alive_proxies,request_count:e.request_count})),0===e.active_threads&&C&&P(!1)}catch(e){console.error("Failed to fetch stats:",e)}},1e3)),()=>{e&&clearInterval(e)}},[C]),(0,s.useEffect)(()=>{var e;(null==p?void 0:null===(e=p.user)||void 0===e?void 0:e.TwitchUsername)&&!j.channelName&&!R&&w(e=>({...e,channelName:p.user.TwitchUsername}))},[p]),(0,s.useEffect)(()=>{(async()=>{try{let e=await k();if((e.active_threads>0||e.is_running)&&(P(!0),q(t=>({...t,activeThreads:e.active_threads,totalProxies:e.total_proxies,aliveProxies:e.alive_proxies,request_count:e.request_count})),e.config)){let{threads:t,timeout:a,proxy_type:r}=e.config;w(s=>({...s,threads:null!=t?t:s.threads,timeout:null!=a?a:s.timeout,proxyType:null!=r?r:s.proxyType,channelName:e.channel_name||s.channelName}))}}catch(e){console.error("Failed to check bot status:",e)}})()},[]);let X=async()=>{try{P(!0),await _({channelName:j.channelName,threads:j.threads,proxyFile:A||void 0,timeout:j.timeout,proxyType:j.proxyType}),x.oR.success("Bot started successfully!")}catch(e){x.oR.error("Failed to start bot: ".concat(e instanceof Error?e.message:"Unknown error")),P(!1)}},U=async()=>{try{await S(),x.oR.success("Bot stopped successfully!"),P(!1),q(e=>({...e,activeThreads:0,requests:0}))}catch(e){x.oR.error("Failed to stop bot"),console.error("Failed to stop bot:",e)}},V=async()=>{try{await (0,g.ri)(),x.oR.success("Logged out successfully!"),a.push("/login")}catch(e){x.oR.error("Failed to logout")}};return(0,r.jsxs)("div",{className:"min-h-screen p-6",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,r.jsxs)(n.Z,{className:"relative text-center mb-8 p-8 rounded-2xl",children:[p&&(0,r.jsx)(i.T,{variant:"bordered",onPress:V,className:"absolute right-4 top-4",color:"danger",children:"Logout"}),(0,r.jsx)("h1",{className:"text-5xl font-black mb-3 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Twitch Viewer Bot"}),(0,r.jsx)("p",{className:"text-xl font-medium",children:p?"Welcome back, ".concat(p.user.username):"Monitor and control your viewer bot"})]}),(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(o.d,{children:(0,r.jsx)("h2",{className:"text-2xl font-semibold",children:"Live Monitoring"})}),(0,r.jsx)(l.U,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)(N,{value:b,previousValue:T}),(0,r.jsx)(v,{title:"Active Threads",value:M.activeThreads,total:j.threads}),(0,r.jsx)(v,{title:"Proxies",value:M.totalProxies,total:M.totalProxies}),(0,r.jsx)(v,{title:"Requests",value:M.request_count})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(o.d,{children:(0,r.jsx)("h2",{className:"text-2xl font-semibold",children:"Basic Configuration"})}),(0,r.jsxs)(l.U,{className:"space-y-6",children:[(0,r.jsx)(c.r,{label:"Channel Name",value:j.channelName,placeholder:(null==p?void 0:null===(t=p.user)||void 0===t?void 0:t.TwitchUsername)||"Enter channel name",onChange:e=>{F(!0),w(t=>({...t,channelName:e.target.value}))}}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(c.r,{type:"number",label:"Number of Threads",value:j.threads.toString(),min:1,max:1e3,onChange:e=>w({...j,threads:Math.max(1,Math.min(1e3,parseInt(e.target.value)||1))})}),(0,r.jsx)(d.I,{content:(0,r.jsxs)("div",{className:"max-w-xs p-2",children:[(0,r.jsx)("p",{children:"Threads determine how many simultaneous connections the bot will make."}),(0,r.jsx)("p",{className:"mt-1",children:"More threads = more viewers, but requires more resources and stable proxies."}),(0,r.jsx)("p",{className:"mt-1",children:"Recommended: Start with 100-200 threads."})]}),children:(0,r.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-default-100 text-default-500 cursor-help",children:"?"})})]}),(0,r.jsx)("div",{children:(0,r.jsx)(u.Q,{value:[j.timeout],defaultValue:[1e4],maxValue:1e4,onChange:e=>w({...j,timeout:Number(Array.isArray(e)?e[0]:e)}),getValue:e=>"".concat(e,"ms"),label:"Request Timeout",step:100})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium block",children:"Proxy List (Optional)"}),(0,r.jsx)(c.r,{type:"file",accept:".txt",onChange:e=>{var t;return E((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Upload a .txt file with proxies or let the bot scrape them automatically"})]})]})]}),(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(o.d,{children:(0,r.jsx)("h2",{className:"text-2xl font-semibold",children:"Advanced Settings"})}),(0,r.jsxs)(l.U,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.r,{label:"Game Name",value:j.gameName,onChange:e=>w({...j,gameName:e.target.value}),isDisabled:!0}),(0,r.jsx)("span",{className:"absolute right-0 top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xs px-2 py-1 rounded",children:"Coming Soon Premium Feature"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.Q,{value:[1],defaultValue:[1],maxValue:60,isDisabled:!0,label:"Messages Per Minute",getValue:e=>"".concat(e," messages"),step:1}),(0,r.jsx)("span",{className:"absolute right-0 top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xs px-2 py-1 rounded",children:"Coming Soon Premium Feature"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(h.A,{checked:!1,isDisabled:!0,children:(0,r.jsx)("span",{className:"text-gray-400",children:"Enable Chat Messages"})}),(0,r.jsx)("span",{className:"absolute right-0 top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xs px-2 py-1 rounded",children:"Coming Soon Premium Feature"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Proxy Type"}),(0,r.jsx)(m.x,{children:["http","socks4","socks5","all"].map(e=>(0,r.jsx)(i.T,{variant:j.proxyType===e?"solid":"bordered",onPress:()=>w({...j,proxyType:e}),children:e},e))})]})]})]})]}),(0,r.jsx)(n.Z,{children:(0,r.jsx)(l.U,{className:"py-6",children:(0,r.jsx)(i.T,{variant:"solid",color:C?"danger":"primary",size:"lg",fullWidth:!0,onPress:C?U:X,children:C?"Stop Bot":"Start Bot"})})})]}),(0,r.jsx)(x.N9,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[797,385,446,86,551,59,441,517,358],()=>t(64841)),_N_E=e.O()}]);